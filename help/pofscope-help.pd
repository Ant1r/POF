#N canvas 1136 197 468 476 10;
#X declare -lib pof;
#X obj 11 11 cnv 15 200 20 empty empty empty 20 12 0 14 -204786 -66577
0;
#X obj 11 33 cnv 15 200 20 empty empty empty 20 12 0 14 -262130 -66577
0;
#X text 40 32 (c) Antoine Rousseau 2014;
#X obj 11 64 cnv 15 320 20 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 25 414 cnv 15 160 30 empty empty empty 20 12 0 14 -261682 -66577
0;
#X obj 32 94 pofhead;
#X text 152 99 Arguments : width height buflen;
#X text 173 133 Inlet 2: width;
#X msg 343 35 \; pd dsp 1;
#X obj 343 14 loadbang;
#X msg 165 247 buflen \$1;
#X obj 32 122 pofrect 400 100;
#X obj 168 205 hsl 128 15 100 400000 1 0 empty empty empty -2 -8 0
10 -262144 -1 -1 0 1;
#X floatatom 165 225 8 0 0 1 samples - -;
#X floatatom 155 396 5 0 0 0 - - -;
#X floatatom 93 396 5 0 0 0 - - -;
#X text 17 63 pofscope : display the waveform of an audio signal.;
#X obj 32 225 pofcolor 0 0.4 0 1;
#X msg 165 315 compute \$1;
#X obj 165 290 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#N canvas 840 609 437 378 source 0;
#X obj 52 309 outlet~;
#X obj 53 27 noise~;
#X obj 53 128 *~;
#X obj 68 53 lop~ 1;
#X obj 117 284 dac~;
#X obj 68 103 *~;
#X obj 117 258 *~;
#X obj 117 171 adc~;
#X obj 206 118 tgl 15 0 empty empty noise 17 7 0 10 -262144 -1 -1 0
1;
#X obj 206 170 sel 0 1;
#X msg 206 196 label noise;
#X msg 289 196 label adc;
#X obj 116 196 *~;
#X obj 215 138 hsl 80 15 0 1 0 0 empty empty listen 20 8 0 10 -262144
-1 -1 0 1;
#X obj 160 187 t f f;
#X obj 160 209 *;
#X obj 160 232 * 0.5;
#X obj 74 169 == 0;
#X obj 53 191 *~ 1;
#X obj 219 65 loadbang;
#X msg 219 86 0;
#X obj 68 77 *~ 60;
#X connect 1 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 18 0;
#X connect 3 0 21 0;
#X connect 5 0 2 1;
#X connect 6 0 4 0;
#X connect 6 0 4 1;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 8 0 12 1;
#X connect 8 0 17 0;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 8 0;
#X connect 11 0 8 0;
#X connect 12 0 6 0;
#X connect 12 0 0 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 14 1 15 1;
#X connect 15 0 16 0;
#X connect 16 0 6 1;
#X connect 17 0 18 1;
#X connect 18 0 6 0;
#X connect 18 0 0 0;
#X connect 19 0 20 0;
#X connect 20 0 8 0;
#X connect 21 0 5 0;
#X connect 21 0 5 1;
#X coords 0 -1 1 1 100 60 1 200 100;
#X restore 46 256 pd source;
#X obj 32 419 pofscope 400 50 40000;
#X text 173 148 Inlet 3: gain (height = 2 * gain);
#X text 173 118 Inlet 1: audio \, buflen \, compute(0/1);
#N canvas 829 557 450 300 print_scale 0;
#X obj 79 241 poffont \$0-f font/vera.ttf 25;
#X obj 80 55 inlet head;
#X obj 235 45 inlet buflen;
#X obj 235 67 / 44100;
#X floatatom 302 66 5 0 0 1 seconds - -;
#X obj 80 206 poftext \$0-f -1 0;
#X obj 80 93 poftranslate -200 -65;
#X obj 235 89 * 1000;
#X obj 235 110 i;
#X obj 235 132 / 1000;
#X msg 235 153 text time(s)=\$1;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 7 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 5 0;
#X restore 49 189 pd print_scale;
#X msg 165 166 loadbang;
#X msg 165 185 44100;
#X text 13 10 Pof: Pd OpenFrameworks externals;
#X obj 222 23 declare -lib pof;
#N canvas 662 238 517 593 peaks 0;
#X obj 353 149 table \$0-sample;
#X obj 30 178 soundfiler;
#X obj 30 132 f \$0;
#X obj 30 111 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 30 155 read -resize data/voice.wav \$1-sample;
#X obj 30 343 f \$0;
#X obj 30 322 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 94 200 5 0 0 1 samples - -;
#X floatatom 189 373 8 0 0 0 - - -;
#X obj 189 402 pack f f \$0, f 24;
#X obj 249 373 t b f;
#X floatatom 249 351 5 0 0 0 - - -;
#X obj 252 330 hsl 128 15 0 4095 0 0 empty empty zoom -2 -8 0 10 -262144
-1 -1 0 1;
#X obj 192 296 hsl 128 15 0 4095 0 0 empty empty scroll -2 -8 0 10
-262144 -1 -1 0 1;
#X msg 189 329 \$1 100;
#X obj 189 350 line;
#X obj 30 205 t b f;
#X text 27 91 first \, load the sample table then compute the peaks
table.;
#X text 47 254 when the peaks table is ready \, ask pofscope to display
all of part of it:, f 43;
#X msg 30 421 peaks \$1-peaks;
#N canvas 555 290 901 669 analysis 0;
#X obj 20 142 inlet;
#X obj 20 163 t f f, f 14;
#X obj 20 184 until;
#X obj 20 227 f;
#X obj 54 227 + 1;
#X msg 35 207 0;
#X obj 142 206 array size \$0-peaks;
#X obj 142 184 t b f;
#X obj 142 227 /;
#X obj 20 274 *;
#X obj 20 250 t f f;
#X obj 197 275 tabread \$0-sample;
#X obj 173 449 change;
#X msg 84 226 set -1;
#X obj 20 298 i;
#X obj 20 320 t f f, f 26;
#X obj 218 408 t f f;
#X obj 218 449 +, f 5;
#X obj 173 470 pack f f;
#X obj 173 493 s \$0-peaks;
#X obj 20 363 tabread \$0-peaks;
#X obj 20 384 t f f, f 12;
#X obj 20 426 min, f 6;
#X obj 89 426 max, f 6;
#X obj 20 469 +, f 12;
#X obj 20 494 tabwrite \$0-peaks;
#X obj 360 208 t f f, f 14;
#X obj 360 229 until;
#X obj 360 272 f;
#X obj 394 272 + 1;
#X msg 375 252 0;
#X obj 360 295 t f f, f 24;
#X obj 360 324 tabread \$0-peaks;
#X obj 360 345 t f f, f 12;
#X obj 360 449 tabwrite \$0-min;
#X obj 429 428 tabwrite \$0-max;
#X obj 197 338 i;
#X obj 197 296 * 1024;
#X obj 197 317 + 1024;
#X obj 197 360 clip 0 2048;
#X obj 245 429 * 2048;
#X obj 89 448 * 2048;
#X obj 89 405 div 2048;
#X obj 20 405 % 2048;
#X obj 360 366 % 2048;
#X obj 429 366 div 2048;
#X obj 360 388 - 1024;
#X obj 360 409 / 1024;
#X obj 429 386 - 1024;
#X obj 429 406 / 1024;
#N canvas 0 50 450 250 (subpatch) 0;
#X array \$0-min 3000 float 0;
#X array \$0-max 3000 float 0;
#X coords 0 1 3000 -1 512 140 1 0 0;
#X restore 361 497 graph;
#X text 48 12 Each "peaks" table value is the representation of the
minimum sample and the maximum sample in the corresponding interval
of the sample table., f 113;
#X text 46 92 The min and max values are represented in only one float
\, by the following formula:, f 87;
#X text 88 108 peak = ((min * 1024) + 1024) + ((max * 1024) + 1024)
* 2048, f 65;
#X msg 360 188 3000;
#X text 47 49 For example \, here the sample table length is 62079
\, and the peaks table length is 3000 \, so every peaks value is the
smallest and the largest of about 20 consecutive samples., f 113;
#X text 358 137 click here to visualize "min" and "max" parts of peaks
table:, f 31;
#X obj 360 164 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 1 1 7 0;
#X connect 1 1 13 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 1 8 1;
#X connect 8 0 9 1;
#X connect 9 0 14 0;
#X connect 10 0 9 0;
#X connect 10 1 11 0;
#X connect 11 0 37 0;
#X connect 12 0 18 0;
#X connect 13 0 12 0;
#X connect 14 0 15 0;
#X connect 15 0 20 0;
#X connect 15 1 12 0;
#X connect 15 1 25 1;
#X connect 16 0 17 0;
#X connect 16 1 40 0;
#X connect 17 0 18 1;
#X connect 18 0 19 0;
#X connect 20 0 21 0;
#X connect 21 0 43 0;
#X connect 21 1 42 0;
#X connect 22 0 24 0;
#X connect 23 0 41 0;
#X connect 24 0 25 0;
#X connect 26 0 27 0;
#X connect 26 1 30 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 28 0 31 0;
#X connect 29 0 28 1;
#X connect 30 0 28 1;
#X connect 31 0 32 0;
#X connect 31 1 34 1;
#X connect 31 1 35 1;
#X connect 32 0 33 0;
#X connect 33 0 44 0;
#X connect 33 1 45 0;
#X connect 36 0 39 0;
#X connect 37 0 38 0;
#X connect 38 0 36 0;
#X connect 39 0 16 0;
#X connect 39 0 23 1;
#X connect 39 0 22 1;
#X connect 40 0 17 1;
#X connect 41 0 24 1;
#X connect 42 0 23 0;
#X connect 43 0 22 0;
#X connect 44 0 46 0;
#X connect 45 0 48 0;
#X connect 46 0 47 0;
#X connect 47 0 34 0;
#X connect 48 0 49 0;
#X connect 49 0 35 0;
#X connect 54 0 26 0;
#X connect 57 0 54 0;
#X restore 57 227 pd analysis;
#X text 28 18 pofscope can use a precomputed "peaks" table \, containing
undersampled tables of smallest and largest values of a sample table
(see "analysis" for detail of "peaks" representation)., f 72;
#X obj 30 474 outlet to_pofscope;
#X obj 353 172 table \$0-peaks 3000;
#X msg 189 425 peaks \$3-peaks \$1 \$2;
#X text 172 458 command: peaks PEAKS_TABLE [FROM [LENGTH]];
#X text 166 482 if FROM is unspecified \, then read from the beginning.
;
#X text 165 494 if LENGTH is unspecified \, then read until the end.
;
#X text 82 532 WARNING: your patch must ensure that the peaks table
is still valid (NOT resized or destroyed) until the end of the next
frame.;
#X connect 1 0 7 0;
#X connect 1 0 16 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 5 0 19 0;
#X connect 6 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 24 0;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 11 0 10 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 8 0;
#X connect 16 0 6 0;
#X connect 16 1 20 0;
#X connect 19 0 22 0;
#X connect 24 0 22 0;
#X restore 259 330 pd peaks;
#X obj 165 270 loadbang;
#X text 182 288 WARNING: from Pof v.0.6 \, compute is initially off.
, f 30;
#X connect 5 0 11 0;
#X connect 9 0 8 0;
#X connect 10 0 21 0;
#X connect 11 0 17 0;
#X connect 11 0 24 0;
#X connect 12 0 13 0;
#X connect 13 0 10 0;
#X connect 13 0 24 1;
#X connect 14 0 21 2;
#X connect 15 0 21 1;
#X connect 15 0 11 1;
#X connect 17 0 21 0;
#X connect 18 0 21 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 25 0 26 0;
#X connect 26 0 12 0;
#X connect 29 0 21 0;
#X connect 30 0 19 0;
